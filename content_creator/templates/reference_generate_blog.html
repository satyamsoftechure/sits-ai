{% extends 'base.html' %}
{% load static %}

{% block title %}
  Generate Blog Post
{% endblock %}

{% block content %}
  <div class="banner p-3">
    <div class="container">
      <div class="d-flex justify-content-center">
        <h5 class="project_name">SITS AI Content Creator</h5>
      </div>
      <div>
        <p class="banner-para">The SITS AI Content Creator is a cutting-edge tool designed to generate high-quality blog content accompanied by relevant images. This innovative AI-powered solution is capable of producing engaging and informative blog posts that cater to various topics and industries.</p>
      </div>
    </div>

    <div id="tooltip_success">
      <p id="message"></p>
    </div>

    <div class="container generate_form_container">
      <form method="post" id="generate-form">
        {% csrf_token %}
        <h4 class="fw-bold text-center">Generate Your Blog</h4>
        <div class="generate-form-keywords">{{ form.title }}</div>
        <div class="generate-form-keywords position-relative">
          {{ form.keywords }}
          <div class="tooltip_suggestion">
            <i class="fa-solid fa-circle-info"></i>
            <span class="tooltiptext">Suggested keywords: keyword1, keyword2, keyword3, ...</span>
          </div>
        </div>
        <div class="generate-form-keywords mb-0 position-relative">
          {{ form.reference }}
          <div class="tooltip_suggestion">
            <i class="fa-solid fa-circle-info"></i>
            <span class="tooltiptext">Suggested References: https://example1.com, https://example2.com, https://example3.com, ...</span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 generate-form-keywords">
            <label for="keywords" class="p-1">*Note:- Maximum words limit 1200</label>
            {{ form.length }}
          </div>
          <div class="col-md-6 language_select">
            <label for="keywords" class="p-1">Select your desired Language</label>
            {{ form.language }}
          </div>
        </div>
        <div class="d-flex justify-content-center Generate-button">
          <button type="submit" form="generate-form" class="btn" id="submit-btn">Generate Blog</button>
          <div id="preloader" class="preloader d-none">
            <div class="loader"></div>
          </div>
        </div>
        {% if form.non_field_errors %}
          <div class="alert alert-danger">{{ form.non_field_errors }}</div>
        {% endif %}
      </form>
    </div>
  </div>

  <script>
    const submitform = document.getElementById('generate-form')
    const preloader = document.getElementById('preloader')
    
    submitform.addEventListener('submit', () => {
      preloader.classList.remove('d-none')
    })
    fetch('/reference-generate-blog/', { method: 'POST' })
      .then((response) => response.text())
      .then((data) => {
        if (data.success) {
          preloader.classList.add('d-none')
        } else {
        }
      })
      .catch((error) => {
        console.error('Error:', error)
      })
  </script>
{% endblock %}
